<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>PIRÁMIX</title>
  <meta name="description" content="Explora la historia completa de México con tarjetas interactivas 3D" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Bangers&display=swap" rel="stylesheet" />
  
  <style>
    /* ============================================= */
    /* ================== RESET ==================== */
    /* ============================================= */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f3f3 0%, #f9f8f8 100%);
      color: #f8f8f2;
      overflow: hidden;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    /* ============================================= */
    /* =============== HEADER 100px ================ */
    /* ============================================= */
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 100px;
      background: linear-gradient(90deg, #43A047 0%, #66BB6A 50%, #43A047 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 20px;
      color: #FFFFFF;
      font-family: 'Bangers', cursive;
      font-size: clamp(2.8rem, 8vw, 5rem);
      letter-spacing: 4px;
      text-shadow: 
        0 0 15px #FFEB3B,
        3px 3px 0 #1B5E20,
        6px 6px 0 #FFEB3B;
      user-select: none;
      box-shadow: 0 8px 30px rgba(67,160,71,0.7);
      border-bottom: 8px solid #FFD54F;
      z-index: 9999;
    }

    .header-title {
      text-align: center;
      flex: 1;
    }

    header:hover {
      background: linear-gradient(90deg, #66BB6A, #43A047);
    }

    /* ============================================= */
    /* =============== CARRUSEL 3D ================= */
    /* ============================================= */
    .carousel {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      perspective: 1400px;
      padding: 120px 20px 40px 20px;
      position: relative;
      touch-action: pan-y;
      min-height: 500px;
    }

    .cards {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .card {
      position: absolute;
      width: 360px;
      height: 340px;
      transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
      transform-style: preserve-3d;
      user-select: none;
      z-index: 1;
      pointer-events: none;
      border-radius: 28px;
    }

    .card.center {
      cursor: pointer;
      pointer-events: auto;
      z-index: 100;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.4s ease;
      pointer-events: auto;
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 28px;
      padding: 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      background: linear-gradient(135deg, #43A047 0%, #66BB6A 100%);
      color: #FFFFFF;
      filter: grayscale(100%) brightness(0.75);
      border: 8px solid #FFD54F;
      box-shadow: 0 20px 50px rgba(67,160,71,0.9);
    }

    .card-front > *, .card-back > * { pointer-events: none; }

    .card-front img {
      width: 100%;
      height: 190px;
      object-fit: cover;
      border-radius: 16px;
      margin: 18px 0;
      border: 6px solid #FFFFFF;
      box-shadow: 0 12px 25px rgba(0,0,0,0.6);
    }

    .card-back {
      transform: rotateY(180deg);
      background: linear-gradient(135deg, #FF8A65 0%, #FFB74D 100%);
      filter: none;
    }

    .card.center .card-front,
    .card.center .card-back {
      filter: none;
      brightness: 1;
    }

    .card h2 {
      font-family: 'Bangers', cursive;
      font-size: 2.3rem;
      color: #FFD54F;
      text-shadow: 3px 3px 0 #1B5E20;
      margin-bottom: 12px;
      letter-spacing: 1.5px;
    }

    .card p {
      font-size: 1.18rem;
      line-height: 1.55;
      color: #FFFDE7;
    }

    /* Posiciones 3D */
    .card.center { transform: translateX(0) translateZ(200px) scale(1.35); opacity: 1; }
    .card.left   { transform: translateX(-420px) translateZ(90px) rotateY(32deg) scale(0.88); opacity: 0.65; }
    .card.right  { transform: translateX(420px) translateZ(90px) rotateY(-32deg) scale(0.88); opacity: 0.65; }
    .card.hidden { opacity: 0; transform: translateX(0) translateZ(0) scale(0.6); pointer-events: none; }

    /* ============================================= */
    /* =============== BOTONES ===================== */
    /* ============================================= */
    button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg, #43A047, #66BB6A);
      border: 8px solid #FFD54F;
      color: white;
      font-size: 3.8rem;
      width: 84px;
      height: 84px;
      cursor: pointer;
      border-radius: 50%;
      user-select: none;
      z-index: 1000;
      box-shadow: 0 15px 40px rgba(0,0,0,0.7);
      transition: all 0.4s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn-left { left: 18px; }
    .btn-right { right: 18px; }

    button:hover {
      background: linear-gradient(90deg, #66BB6A, #81C784);
      transform: translateY(-50%) scale(1.25);
      box-shadow: 0 0 70px #FFEB3B;
    }

    /* ============================================= */
    /* =============== RESPONSIVE ================= */
    /* ============================================= */
    @media (max-width: 768px) {
      header { height: 90px; font-size: clamp(2.4rem, 7vw, 4rem); }
      .carousel { padding: 110px 10px 30px; }
      .card { width: 320px; height: 300px; }
      .card-front img { height: 160px; }
      button { width: 70px; height: 70px; font-size: 3rem; }
    }

    @media (max-width: 480px) {
      header { height: 80px; }
      .carousel { padding: 95px 5px 20px; }
      .card { width: 280px; height: 260px; }
      .card-front img { height: 130px; }
      .card h2 { font-size: 1.9rem; }
      button { width: 60px; height: 60px; font-size: 2.6rem; }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-title">PIRÁMIX</div>
  </header>

  <div class="carousel" id="carousel">
    <button class="btn btn-left" aria-label="Anterior">〈</button>
    <div class="cards">

      <!-- 1. Independencia -->
      <div class="card center" data-url="independencia.html">
        <div class="card-inner">
          <div class="card-front">
            <h2>Independencia de México</h2>
            <img src="imagenesp/independencia.jpg" alt="Independencia" loading="lazy"/>
            <audio src="audiosp/independencia.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1810–1821</h2>
            <p>La Independencia de México comenzó con el Grito de Dolores de Miguel Hidalgo y terminó con la entrada del Ejército Trigarante en 1821, logrando la libertad del dominio español.</p>
            <audio src="audiosp/independenciar1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 2. Revolución -->
      <div class="card" data-url="revolucion.html">
        <div class="card-inner">
          <div class="card-front">
            <h2>Revolución Mexicana</h2>
            <img src="imagenesp/revolucion.jpg" alt="Revolución" loading="lazy"/>
            <audio src="audiosp/revolucion.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1910–1920</h2>
            <p>La Revolución Mexicana fue una guerra civil que comenzó en 1910 para acabar con la dictadura de Porfirio Díaz y logró cambios políticos, sociales y agrarios en México.</p>
            <audio src="audiosp/revolucionr1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 3. Conquista -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>Conquista de México</h2>
            <img src="imagenesp/conquista.jpg" alt="Conquista" loading="lazy"/>
            <audio src="audiosp/conquista.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1519–1521</h2>
            <p>Los españoles, liderados por Hernán Cortés y con apoyo de pueblos indígenas, derrotaron al Imperio Mexica en 1521, marcando el inicio del dominio español en México.</p>
            <audio src="audiosp/conquistar1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 4. Virreinato -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>Virreinato de la Nueva España</h2>
            <img src="imagenesp/virreinato.jpg" alt="Virreinato" loading="lazy"/>
            <audio src="audiosp/virreinato.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1521–1821</h2>
            <p>El Virreinato de la Nueva España fue el periodo de dominio español en México, con control político, religioso y económico durante tres siglos.</p>
            <audio src="audiosp/virreinator1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 5. República -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>Formación de la República</h2>
            <img src="imagenesp/republica.jpg" alt="República" loading="lazy"/>
            <audio src="audiosp/republica.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1821–1857</h2>
            <p>Tras la independencia, México enfrentó inestabilidad política, conflictos internos y pérdida de territorio, mientras intentaba consolidarse como república.</p>
            <audio src="audiosp/republicar1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 6. Reforma -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>Reforma</h2>
            <img src="imagenesp/reforma.jpg" alt="Reforma" loading="lazy"/>
            <audio src="audiosp/reforma.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1857–1876</h2>
            <p>La época de la Reforma fue un periodo de conflictos entre liberales y conservadores, que buscó establecer un Estado laico y limitar el poder de la Iglesia.</p>
            <audio src="audiosp/reformar1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 7. Porfiriato -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>Porfiriato</h2>
            <img src="imagenesp/porfiriato.jpg" alt="Porfiriato" loading="lazy"/>
            <audio src="audiosp/porfiriato.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1876–1911</h2>
            <p>El Porfiriato fue una etapa de progreso económico y orden bajo la dictadura de Porfirio Díaz, pero con gran desigualdad y represión social.</p>
            <audio src="audiosp/porfiriator1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 8. Reconstrucción -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>Reconstrucción posrevolucionaria</h2>
            <img src="imagenesp/reconstruccion.jpg" alt="Reconstrucción" loading="lazy"/>
            <audio src="audiosp/reconstruccion.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1920–1940</h2>
            <p>La reconstrucción posrevolucionaria fue un periodo de reformas agrarias, educación pública y consolidación del poder político tras la Revolución Mexicana.</p>
            <audio src="audiosp/reconstruccionr1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 9. México moderno -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>México moderno</h2>
            <img src="imagenesp/moderno.jpg" alt="Moderno" loading="lazy"/>
            <audio src="audiosp/moderno.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>1940–2000</h2>
            <p>México moderno fue una etapa de crecimiento económico, industrialización y cambios sociales, pero también de crisis políticas y movimientos sociales importantes.</p>
            <audio src="audiosp/modernor1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 10. México contemporáneo -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>México contemporáneo</h2>
            <img src="imagenesp/contemporaneo.jpg" alt="Contemporáneo" loading="lazy"/>
            <audio src="audiosp/contemporaneo.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>2000–hoy</h2>
            <p>México contemporáneo se caracteriza por la alternancia política, reformas democráticas y retos como la violencia y la desigualdad social.</p>
            <audio src="audiosp/contemporaneor1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 11. Prehispánico -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>México prehispánico</h2>
            <img src="imagenesp/prehispanico.jpg" alt="Prehispánico" loading="lazy"/>
            <audio src="audiosp/prehispanico.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>2500 a.C.-1519 d.C.</h2>
            <p>El México prehispánico abarca las grandes civilizaciones indígenas como los olmecas, mayas y mexicas, que desarrollaron avanzadas culturas, arquitectura y conocimientos científicos.</p>
            <audio src="audiosp/prehispanicor1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

      <!-- 12. Antiguo -->
      <div class="card" data-url="">
        <div class="card-inner">
          <div class="card-front">
            <h2>México antiguo</h2>
            <img src="imagenesp/antiguo.jpg" alt="Antiguo" loading="lazy"/>
            <audio src="audiosp/antiguo.mp3" class="audio-front" preload="none"></audio>
          </div>
          <div class="card-back">
            <h2>Hasta 2500 a.C.</h2>
            <p>El México antiguo corresponde a la etapa prehistórica, donde los primeros habitantes eran cazadores-recolectores que comenzaron a desarrollar la agricultura y asentamientos sedentarios.</p>
            <audio src="audiosp/antiguor1.mp3" class="audio-back" preload="none"></audio>
          </div>
        </div>
      </div>

    </div>
    <button class="btn btn-right" aria-label="Siguiente">〉</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cards = [...document.querySelectorAll('.card')];
      const btnLeft = document.querySelector('.btn-left');
      const btnRight = document.querySelector('.btn-right');
      const carousel = document.querySelector('#carousel');
      let current = 0;
      let currentAudio = null;
      let isFlipped = false;
      let touchStartX = 0;
      let isTouching = false;

      const pauseAllAudios = () => {
        cards.forEach(card => {
          ['audio-front', 'audio-back'].forEach(cls => {
            const audio = card.querySelector(`.${cls}`);
            if (audio) { audio.pause(); audio.currentTime = 0; }
          });
        });
        currentAudio = null;
      };

      const playAudioForCenterCard = () => {
        if (currentAudio) { currentAudio.pause(); currentAudio.currentTime = 0; }
        const center = document.querySelector('.card.center');
        if (!center) return;
        const audio = isFlipped 
          ? center.querySelector('.audio-back') 
          : center.querySelector('.audio-front');
        if (audio) {
          currentAudio = audio;
          audio.play().catch(() => {});
        }
      };

      const handleCardInteractions = () => {
        cards.forEach(card => {
          const inner = card.querySelector('.card-inner');
          if (inner) inner.replaceWith(inner.cloneNode(true));
        });

        const center = document.querySelector('.card.center');
        if (!center) return;
        const inner = center.querySelector('.card-inner');

        inner.onmouseover = () => { isFlipped = true; inner.style.transform = 'rotateY(180deg)'; playAudioForCenterCard(); };
        inner.onmouseout = (e) => { if (!center.contains(e.relatedTarget)) { isFlipped = false; inner.style.transform = 'rotateY(0deg)'; playAudioForCenterCard(); } };
        inner.onclick = () => {
          if (isFlipped && center.dataset.url) {
            window.location.href = center.dataset.url;
          } else {
            isFlipped = true;
            inner.style.transform = 'rotateY(180deg)';
            playAudioForCenterCard();
          }
        };
        inner.ontouchstart = () => isTouching = true;
        inner.ontouchend = (e) => {
          if (!isTouching) return;
          e.preventDefault();
          isTouching = false;
          if (!isFlipped) {
            isFlipped = true;
            inner.style.transform = 'rotateY(180deg)';
            playAudioForCenterCard();
          } else if (center.dataset.url) {
            window.location.href = center.dataset.url;
          }
        };
      };

      const updatePositions = () => {
        const total = cards.length;
        cards.forEach((card, i) => {
          card.classList.remove('left', 'center', 'right', 'hidden');
          const pos = (i - current + total) % total;
          if (pos === 0) card.classList.add('center');
          else if (pos === 1) card.classList.add('right');
          else if (pos === total - 1) card.classList.add('left');
          else card.classList.add('hidden');
          card.querySelector('.card-inner').style.transform = 'rotateY(0deg)';
        });
        isFlipped = false;
        pauseAllAudios();
        handleCardInteractions();
        playAudioForCenterCard();
      };

      btnLeft.onclick = () => { current = (current - 1 + cards.length) % cards.length; updatePositions(); };
      btnRight.onclick = () => { current = (current + 1) % cards.length; updatePositions(); };

      carousel.ontouchstart = e => { touchStartX = e.changedTouches[0].screenX; isTouching = true; };
      carousel.ontouchend = e => {
        if (!isTouching) return;
        const diff = e.changedTouches[0].screenX - touchStartX;
        isTouching = false;
        if (diff > 50) { current = (current - 1 + cards.length) % cards.length; updatePositions(); }
        else if (diff < -50) { current = (current + 1) % cards.length; updatePositions(); }
      };

      document.body.onclick = document.body.ontouchstart = () => playAudioForCenterCard();

      updatePositions();
    });
  </script>
</body>
</html>