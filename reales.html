<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tus Reales</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Fredoka+One&family=Outfit:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="reales.css" />
</head>
<body>

  <header>
    <button class="back-button" onclick="goBack()" aria-label="Regresar">âŸµ</button>
    <div class="header-title">Tus Reales</div>
  </header>

  <div class="main-area">
    <div class="content-wrapper">

      <div class="real-count-container">
        <h1>Tus Reales Acumulados</h1>
        <p id="real-count">Cargando...</p>
      </div>

      <div class="progress-container">
        <div class="progress-label" id="next-badge">Siguiente: Â¡Primer Real!</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>

      <div class="badges-section">
        <h2 class="badges-title">Insignias</h2>
        <div class="badges-grid" id="badges-container"></div>
      </div>

    </div>
  </div>

  <script>
    const BADGES = [
      { id: 1, name: 'Benito JuÃ¡rez', image: 'imagenes/i1.png', required: 1, desc: 'Defensor del Estado laico, la soberanÃ­a y las Leyes de Reforma.' },
      { id: 2, name: 'Miguel Hidalgo y Costilla', image: 'imagenes/i2.png', required: 100, desc: 'Iniciador de la Independencia; Padre de la Patria.' },
      { id: 3, name: 'JosÃ© MarÃ­a Morelos y PavÃ³n', image: 'imagenes/i3.png', required: 200, desc: 'Estratega insurgente; autor de Los Sentimientos de la NaciÃ³n.' },
      { id: 4, name: 'LÃ¡zaro CÃ¡rdenas del RÃ­o', image: 'imagenes/i4.png', required: 300, desc: 'NacionalizÃ³ el petrÃ³leo y transformÃ³ la justicia social mexicana.' },
      { id: 5, name: 'Emiliano Zapata', image: 'imagenes/i5.png', required: 400, desc: 'LÃ­der campesino del sur; sÃ­mbolo de la lucha por â€œTierra y Libertadâ€.' },
      { id: 6, name: 'Pancho Villa', image: 'imagenes/i6.png', required: 500, desc: 'Revolucionario del norte; figura legendaria del pueblo en armas.' },
      { id: 7, name: 'CuauhtÃ©moc', image: 'imagenes/i7.png', required: 600, desc: 'Ãšltimo tlatoani mexica; sÃ­mbolo de resistencia indÃ­gena.' },
      { id: 8, name: 'Sor Juana InÃ©s de la Cruz', image: 'imagenes/i8.png', required: 700, desc: 'Escritora y pensadora; precursora del feminismo y genio literario.' },
      { id: 9, name: 'Francisco I. Madero', image: 'imagenes/i9.png', required: 800, desc: 'LÃ­der democrÃ¡tico; iniciÃ³ la RevoluciÃ³n Mexicana.' },
      { id: 10, name: 'Vicente Guerrero', image: 'imagenes/i10.png', required: 900, desc: 'HÃ©roe insurgente y presidente que aboliÃ³ la esclavitud.' },
      { id: 11, name: 'Porfirio DÃ­az', image: 'imagenes/i11.png', required: 1000, desc: 'Modernizador y dictador; figura clave del siglo XIX.' },
      { id: 12, name: 'NezahualcÃ³yotl', image: 'imagenes/i12.png', required: 1100, desc: 'Rey poeta de Texcoco; sÃ­mbolo de sabidurÃ­a y arte prehispÃ¡nico.' },
      { id: 13, name: 'JosÃ© Vasconcelos', image: 'imagenes/i13.png', required: 1200, desc: 'FilÃ³sofo y polÃ­tico; impulsor de la educaciÃ³n pÃºblica y la identidad nacional.' },
      { id: 14, name: 'AgustÃ­n de Iturbide', image: 'imagenes/i14.png', required: 1300, desc: 'ConsumÃ³ la Independencia y fue el primer emperador mexicano.' },
      { id: 15, name: 'Ignacio Zaragoza', image: 'imagenes/i15.png', required: 1400, desc: 'Vencedor de la Batalla de Puebla (5 de mayo de 1862).' },
      { id: 16, name: 'Plutarco ElÃ­as Calles', image: 'imagenes/i16.png', required: 1500, desc: 'Fundador del PNR (antecedente del PRI); base del sistema polÃ­tico moderno.' },
      { id: 17, name: 'Melchor Ocampo', image: 'imagenes/i17.png', required: 1600, desc: 'Liberal e ideÃ³logo del Estado laico.' },
      { id: 18, name: 'Leona Vicario', image: 'imagenes/i18.png', required: 1700, desc: 'HeroÃ­na de la Independencia; pionera en la participaciÃ³n femenina.' },
      { id: 19, name: 'Diego Rivera', image: 'imagenes/i19.png', required: 1800, desc: 'Muralista mundialmente reconocido; plasmÃ³ la historia mexicana en su arte.' },
      { id: 20, name: 'JosÃ© Clemente Orozco', image: 'imagenes/i20.png', required: 1900, desc: 'Muralista; expresÃ³ la tragedia y el espÃ­ritu del pueblo mexicano.' },
      { id: 21, name: 'Frida Kahlo', image: 'imagenes/i21.png', required: 2000, desc: 'Pintora universal; Ã­cono de identidad, arte y resistencia.' },
      { id: 22, name: 'Venustiano Carranza', image: 'imagenes/i22.png', required: 2100, desc: 'PromulgÃ³ la ConstituciÃ³n de 1917.' },
      { id: 23, name: 'Ignacio Allende', image: 'imagenes/i23.png', required: 2200, desc: 'Militar insurgente; colaborador principal de Hidalgo.' },
      { id: 24, name: 'David Alfaro Siqueiros', image: 'imagenes/i24.png', required: 2300, desc: 'Muralista y activista polÃ­tico; innovador en el arte social.' },
      { id: 25, name: 'Guadalupe Victoria', image: 'imagenes/i25.png', required: 2400, desc: 'Primer presidente de MÃ©xico; consolidÃ³ la independencia.' },
      { id: 26, name: 'Mario Molina', image: 'imagenes/i26.png', required: 2500, desc: 'Premio Nobel de QuÃ­mica; descubriÃ³ el daÃ±o de los CFC en la capa de ozono.' },
      { id: 27, name: 'Octavio Paz', image: 'imagenes/i27.png', required: 2600, desc: 'Premio Nobel de Literatura; uno de los mÃ¡s grandes intelectuales del siglo XX.' },
      { id: 28, name: 'JosÃ©fa Ortiz de DomÃ­nguez', image: 'imagenes/i28.png', required: 2700, desc: 'HeroÃ­na de la Independencia; avisÃ³ del descubrimiento de la conspiraciÃ³n.' },
      { id: 29, name: 'Felipe Ãngeles', image: 'imagenes/i29.png', required: 2800, desc: 'General revolucionario; ejemplo de Ã©tica y estrategia militar.' },
      { id: 30, name: 'Manuel Ãvila Camacho', image: 'imagenes/i30.png', required: 2900, desc: 'Presidente durante la Segunda Guerra Mundial; promoviÃ³ la unidad nacional.' },
      { id: 31, name: 'Elena Poniatowska', image: 'imagenes/i31.png', required: 3000, desc: 'Escritora y periodista; defensora de los derechos humanos y la verdad histÃ³rica.' },
      { id: 32, name: 'Rosario Castellanos', image: 'imagenes/i32.png', required: 3100, desc: 'Escritora y diplomÃ¡tica; voz del feminismo y las culturas indÃ­genas.' },
      { id: 33, name: 'Ignacio RamÃ­rez â€œEl Nigromanteâ€', image: 'imagenes/i33.png', required: 3200, desc: 'Liberal y escritor; defensor de la educaciÃ³n y la libertad de pensamiento.' },
      { id: 34, name: 'Vicente Riva Palacio', image: 'imagenes/i34.png', required: 3300, desc: 'Militar, polÃ­tico e historiador; defensor de la RepÃºblica y la cultura.' },
      { id: 35, name: 'Moctezuma Xocoyotzin', image: 'imagenes/i35.png', required: 3400, desc: 'Gobernante mexica durante la llegada de los espaÃ±oles; figura clave del fin del imperio.' }
    ];

    let realCount = parseInt(localStorage.getItem('realCount') || '0');
    let unlockedBadges = JSON.parse(localStorage.getItem('unlockedBadges') || '[]');

    document.getElementById('real-count').textContent = `${realCount.toLocaleString()} Reales`;

    function checkBadges() {
      let nuevo = false;
      BADGES.forEach(b => {
        if (realCount >= b.required && !unlockedBadges.includes(b.id)) {
          unlockedBadges.push(b.id);
          nuevo = true;
          showNotification(`Â¡Nueva insignia! ${b.name}`);
        }
      });
      if (nuevo) localStorage.setItem('unlockedBadges', JSON.stringify(unlockedBadges));
      renderBadges();
      updateProgress();
    }

    function renderBadges() {
      const c = document.getElementById('badges-container');
      c.innerHTML = BADGES.map(b => {
        const unlocked = unlockedBadges.includes(b.id);
        const nuevo = unlocked && !localStorage.getItem(`seen-${b.id}`);
        if (!unlocked) {
          return `<div class="badge locked"><div class="badge-image locked-image">?</div><div class="badge-name">???</div></div>`;
        }
        return `<div class="badge unlocked ${nuevo?'new':''}" onclick="showDetail(${b.id})">
          <img src="${b.image}" alt="${b.name}" class="badge-image" onerror="this.style.display='none'">
          <div class="badge-name">${b.name}</div>
        </div>`;
      }).join('');
    }

    function updateProgress() {
      const next = BADGES.find(b => !unlockedBadges.includes(b.id));
      const fill = document.getElementById('progress-fill');
      const label = document.getElementById('next-badge');
      if (next) {
        const pct = Math.min((realCount / next.required) * 100, 100);
        fill.style.width = pct + '%';
        label.textContent = `Siguiente: ${next.name} (${next.required.toLocaleString()})`;
      } else {
        fill.style.width = '100%';
        label.textContent = 'Â¡Todas las insignias desbloqueadas! ðŸŽ‰';
      }
    }

    function showDetail(id) {
      const b = BADGES.find(x => x.id === id);
      localStorage.setItem(`seen-${id}`, 'true');
      renderBadges();
      alert(`ðŸ† ${b.name}\n\n${b.desc}\n\nReales requeridos: ${b.required.toLocaleString()}\nÂ¡Felicidades!`);
    }

    function showNotification(msg) {
      const n = document.createElement('div');
      n.className = 'notification';
      n.textContent = msg;
      document.body.appendChild(n);
      setTimeout(() => n.remove(), 5000);
    }

    function goBack() {
      if (history.length > 1) history.back();
      else location.href = 'juego-virreinato.html';
    }

    window.onload = checkBadges;
  </script>
</body>
</html>